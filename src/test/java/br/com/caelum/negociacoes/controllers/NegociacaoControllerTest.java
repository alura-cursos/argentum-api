package br.com.caelum.negociacoes.controllers;

import static org.assertj.core.api.Assertions.assertThat;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.context.SpringBootTest.WebEnvironment;
import org.springframework.boot.test.web.client.TestRestTemplate;
import org.springframework.boot.web.server.LocalServerPort;
import org.springframework.test.context.junit4.SpringRunner;

@RunWith(SpringRunner.class)
@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)
public class NegociacaoControllerTest {

	@Autowired
	private TestRestTemplate restTemplate;

	@LocalServerPort
	private int port;

	@Test
	public void deveRetornartodasAsNegociacoesCasoSejaChamadoSemId() throws Exception {
		assertThat(this.restTemplate.getForObject("http://localhost:" + port + "/negociacoes", String.class))
				.isEqualTo("{\"negociacoes\":[{\"preco\":265.3,\"quantidade\":15,\"data\":\"2018-10-07T00:00:00.000+0000\",\"volume\":3979.5},{\"preco\":348.41,\"quantidade\":20,\"data\":\"2018-10-07T00:00:00.000+0000\",\"volume\":6968.200000000001},{\"preco\":332.09,\"quantidade\":19,\"data\":\"2018-10-07T00:00:00.000+0000\",\"volume\":6309.709999999999},{\"preco\":299.62,\"quantidade\":17,\"data\":\"2018-10-07T00:00:00.000+0000\",\"volume\":5093.54},{\"preco\":338.2,\"quantidade\":19,\"data\":\"2018-10-08T00:00:00.000+0000\",\"volume\":6425.8},{\"preco\":285.2,\"quantidade\":16,\"data\":\"2018-10-08T00:00:00.000+0000\",\"volume\":4563.2},{\"preco\":303.81,\"quantidade\":17,\"data\":\"2018-10-08T00:00:00.000+0000\",\"volume\":5164.77},{\"preco\":331.15,\"quantidade\":19,\"data\":\"2018-10-08T00:00:00.000+0000\",\"volume\":6291.849999999999},{\"preco\":374.02,\"quantidade\":22,\"data\":\"2018-10-09T00:00:00.000+0000\",\"volume\":8228.439999999999},{\"preco\":399.78,\"quantidade\":23,\"data\":\"2018-10-09T00:00:00.000+0000\",\"volume\":9194.939999999999},{\"preco\":272.44,\"quantidade\":16,\"data\":\"2018-10-09T00:00:00.000+0000\",\"volume\":4359.04},{\"preco\":357.56,\"quantidade\":21,\"data\":\"2018-10-09T00:00:00.000+0000\",\"volume\":7508.76},{\"preco\":248.09,\"quantidade\":14,\"data\":\"2018-10-10T00:00:00.000+0000\",\"volume\":3473.26},{\"preco\":418.64,\"quantidade\":24,\"data\":\"2018-10-10T00:00:00.000+0000\",\"volume\":10047.36},{\"preco\":261.74,\"quantidade\":15,\"data\":\"2018-10-10T00:00:00.000+0000\",\"volume\":3926.1000000000004},{\"preco\":375.8,\"quantidade\":22,\"data\":\"2018-10-10T00:00:00.000+0000\",\"volume\":8267.6},{\"preco\":327.38,\"quantidade\":19,\"data\":\"2018-10-11T00:00:00.000+0000\",\"volume\":6220.22},{\"preco\":312.65,\"quantidade\":18,\"data\":\"2018-10-11T00:00:00.000+0000\",\"volume\":5627.7},{\"preco\":314.5,\"quantidade\":18,\"data\":\"2018-10-11T00:00:00.000+0000\",\"volume\":5661.0},{\"preco\":278.44,\"quantidade\":16,\"data\":\"2018-10-11T00:00:00.000+0000\",\"volume\":4455.04},{\"preco\":237.99,\"quantidade\":13,\"data\":\"2018-10-12T00:00:00.000+0000\",\"volume\":3093.87},{\"preco\":265.46,\"quantidade\":15,\"data\":\"2018-10-12T00:00:00.000+0000\",\"volume\":3981.8999999999996},{\"preco\":351.45,\"quantidade\":20,\"data\":\"2018-10-12T00:00:00.000+0000\",\"volume\":7029.0},{\"preco\":334.97,\"quantidade\":19,\"data\":\"2018-10-12T00:00:00.000+0000\",\"volume\":6364.43},{\"preco\":314.44,\"quantidade\":18,\"data\":\"2018-10-13T00:00:00.000+0000\",\"volume\":5659.92},{\"preco\":288.94,\"quantidade\":16,\"data\":\"2018-10-13T00:00:00.000+0000\",\"volume\":4623.04},{\"preco\":227.97,\"quantidade\":13,\"data\":\"2018-10-13T00:00:00.000+0000\",\"volume\":2963.61},{\"preco\":243.83,\"quantidade\":14,\"data\":\"2018-10-13T00:00:00.000+0000\",\"volume\":3413.6200000000003},{\"preco\":401.08,\"quantidade\":23,\"data\":\"2018-10-14T00:00:00.000+0000\",\"volume\":9224.84},{\"preco\":270.68,\"quantidade\":15,\"data\":\"2018-10-14T00:00:00.000+0000\",\"volume\":4060.2000000000003},{\"preco\":230.9,\"quantidade\":13,\"data\":\"2018-10-14T00:00:00.000+0000\",\"volume\":3001.7000000000003},{\"preco\":348.15,\"quantidade\":20,\"data\":\"2018-10-14T00:00:00.000+0000\",\"volume\":6963.0},{\"preco\":325.93,\"quantidade\":19,\"data\":\"2018-10-15T00:00:00.000+0000\",\"volume\":6192.67},{\"preco\":418.18,\"quantidade\":24,\"data\":\"2018-10-15T00:00:00.000+0000\",\"volume\":10036.32},{\"preco\":386.5,\"quantidade\":22,\"data\":\"2018-10-15T00:00:00.000+0000\",\"volume\":8503.0},{\"preco\":330.63,\"quantidade\":19,\"data\":\"2018-10-15T00:00:00.000+0000\",\"volume\":6281.97},{\"preco\":398.83,\"quantidade\":23,\"data\":\"2018-10-16T00:00:00.000+0000\",\"volume\":9173.09},{\"preco\":354.97,\"quantidade\":20,\"data\":\"2018-10-16T00:00:00.000+0000\",\"volume\":7099.400000000001},{\"preco\":341.23,\"quantidade\":20,\"data\":\"2018-10-16T00:00:00.000+0000\",\"volume\":6824.6},{\"preco\":362.16,\"quantidade\":21,\"data\":\"2018-10-16T00:00:00.000+0000\",\"volume\":7605.360000000001},{\"preco\":376.39,\"quantidade\":22,\"data\":\"2018-10-17T00:00:00.000+0000\",\"volume\":8280.58},{\"preco\":365.29,\"quantidade\":21,\"data\":\"2018-10-17T00:00:00.000+0000\",\"volume\":7671.09},{\"preco\":439.37,\"quantidade\":25,\"data\":\"2018-10-17T00:00:00.000+0000\",\"volume\":10984.25},{\"preco\":343.52,\"quantidade\":20,\"data\":\"2018-10-17T00:00:00.000+0000\",\"volume\":6870.4},{\"preco\":408.25,\"quantidade\":24,\"data\":\"2018-10-18T00:00:00.000+0000\",\"volume\":9798.0},{\"preco\":389.57,\"quantidade\":22,\"data\":\"2018-10-18T00:00:00.000+0000\",\"volume\":8570.539999999999},{\"preco\":394.66,\"quantidade\":23,\"data\":\"2018-10-18T00:00:00.000+0000\",\"volume\":9077.18},{\"preco\":420.63,\"quantidade\":24,\"data\":\"2018-10-18T00:00:00.000+0000\",\"volume\":10095.119999999999},{\"preco\":357.84,\"quantidade\":21,\"data\":\"2018-10-19T00:00:00.000+0000\",\"volume\":7514.639999999999},{\"preco\":428.82,\"quantidade\":25,\"data\":\"2018-10-19T00:00:00.000+0000\",\"volume\":10720.5},{\"preco\":441.79,\"quantidade\":25,\"data\":\"2018-10-19T00:00:00.000+0000\",\"volume\":11044.75},{\"preco\":245.79,\"quantidade\":14,\"data\":\"2018-10-19T00:00:00.000+0000\",\"volume\":3441.06},{\"preco\":403.57,\"quantidade\":23,\"data\":\"2018-10-20T00:00:00.000+0000\",\"volume\":9282.11},{\"preco\":402.94,\"quantidade\":23,\"data\":\"2018-10-20T00:00:00.000+0000\",\"volume\":9267.62},{\"preco\":233.29,\"quantidade\":13,\"data\":\"2018-10-20T00:00:00.000+0000\",\"volume\":3032.77},{\"preco\":291.82,\"quantidade\":17,\"data\":\"2018-10-20T00:00:00.000+0000\",\"volume\":4960.94},{\"preco\":289.75,\"quantidade\":17,\"data\":\"2018-10-21T00:00:00.000+0000\",\"volume\":4925.75},{\"preco\":233.37,\"quantidade\":13,\"data\":\"2018-10-21T00:00:00.000+0000\",\"volume\":3033.81},{\"preco\":362.02,\"quantidade\":21,\"data\":\"2018-10-21T00:00:00.000+0000\",\"volume\":7602.42},{\"preco\":290.48,\"quantidade\":17,\"data\":\"2018-10-21T00:00:00.000+0000\",\"volume\":4938.16},{\"preco\":304.4,\"quantidade\":17,\"data\":\"2018-10-22T00:00:00.000+0000\",\"volume\":5174.799999999999},{\"preco\":286.89,\"quantidade\":16,\"data\":\"2018-10-22T00:00:00.000+0000\",\"volume\":4590.24},{\"preco\":412.26,\"quantidade\":24,\"data\":\"2018-10-22T00:00:00.000+0000\",\"volume\":9894.24},{\"preco\":259.96,\"quantidade\":15,\"data\":\"2018-10-22T00:00:00.000+0000\",\"volume\":3899.3999999999996},{\"preco\":342.65,\"quantidade\":20,\"data\":\"2018-10-23T00:00:00.000+0000\",\"volume\":6853.0},{\"preco\":268.39,\"quantidade\":15,\"data\":\"2018-10-23T00:00:00.000+0000\",\"volume\":4025.85},{\"preco\":244.58,\"quantidade\":14,\"data\":\"2018-10-23T00:00:00.000+0000\",\"volume\":3424.1200000000003},{\"preco\":429.19,\"quantidade\":25,\"data\":\"2018-10-23T00:00:00.000+0000\",\"volume\":10729.75},{\"preco\":267.13,\"quantidade\":15,\"data\":\"2018-10-24T00:00:00.000+0000\",\"volume\":4006.95},{\"preco\":375.04,\"quantidade\":22,\"data\":\"2018-10-24T00:00:00.000+0000\",\"volume\":8250.880000000001},{\"preco\":338.74,\"quantidade\":19,\"data\":\"2018-10-24T00:00:00.000+0000\",\"volume\":6436.06},{\"preco\":233.63,\"quantidade\":13,\"data\":\"2018-10-24T00:00:00.000+0000\",\"volume\":3037.19},{\"preco\":277.4,\"quantidade\":16,\"data\":\"2018-10-25T00:00:00.000+0000\",\"volume\":4438.4},{\"preco\":385.48,\"quantidade\":22,\"data\":\"2018-10-25T00:00:00.000+0000\",\"volume\":8480.560000000001},{\"preco\":341.05,\"quantidade\":20,\"data\":\"2018-10-25T00:00:00.000+0000\",\"volume\":6821.0},{\"preco\":246.65,\"quantidade\":14,\"data\":\"2018-10-25T00:00:00.000+0000\",\"volume\":3453.1},{\"preco\":245.44,\"quantidade\":14,\"data\":\"2018-10-26T00:00:00.000+0000\",\"volume\":3436.16},{\"preco\":388.42,\"quantidade\":22,\"data\":\"2018-10-26T00:00:00.000+0000\",\"volume\":8545.24},{\"preco\":381.38,\"quantidade\":22,\"data\":\"2018-10-26T00:00:00.000+0000\",\"volume\":8390.36},{\"preco\":308.83,\"quantidade\":18,\"data\":\"2018-10-26T00:00:00.000+0000\",\"volume\":5558.94},{\"preco\":327.87,\"quantidade\":19,\"data\":\"2018-10-27T00:00:00.000+0000\",\"volume\":6229.53},{\"preco\":332.59,\"quantidade\":19,\"data\":\"2018-10-27T00:00:00.000+0000\",\"volume\":6319.209999999999},{\"preco\":376.92,\"quantidade\":22,\"data\":\"2018-10-27T00:00:00.000+0000\",\"volume\":8292.24},{\"preco\":242.54,\"quantidade\":14,\"data\":\"2018-10-27T00:00:00.000+0000\",\"volume\":3395.56},{\"preco\":331.51,\"quantidade\":19,\"data\":\"2018-10-28T00:00:00.000+0000\",\"volume\":6298.69},{\"preco\":335.31,\"quantidade\":19,\"data\":\"2018-10-28T00:00:00.000+0000\",\"volume\":6370.89},{\"preco\":362.84,\"quantidade\":21,\"data\":\"2018-10-28T00:00:00.000+0000\",\"volume\":7619.639999999999},{\"preco\":221.13,\"quantidade\":13,\"data\":\"2018-10-28T00:00:00.000+0000\",\"volume\":2874.69},{\"preco\":422.52,\"quantidade\":24,\"data\":\"2018-10-29T00:00:00.000+0000\",\"volume\":10140.48},{\"preco\":253.87,\"quantidade\":14,\"data\":\"2018-10-29T00:00:00.000+0000\",\"volume\":3554.1800000000003},{\"preco\":392.67,\"quantidade\":23,\"data\":\"2018-10-29T00:00:00.000+0000\",\"volume\":9031.41},{\"preco\":242.19,\"quantidade\":14,\"data\":\"2018-10-29T00:00:00.000+0000\",\"volume\":3390.66},{\"preco\":409.41,\"quantidade\":24,\"data\":\"2018-10-30T00:00:00.000+0000\",\"volume\":9825.84},{\"preco\":307.09,\"quantidade\":18,\"data\":\"2018-10-30T00:00:00.000+0000\",\"volume\":5527.62},{\"preco\":330.93,\"quantidade\":19,\"data\":\"2018-10-30T00:00:00.000+0000\",\"volume\":6287.67},{\"preco\":384.09,\"quantidade\":22,\"data\":\"2018-10-30T00:00:00.000+0000\",\"volume\":8449.98},{\"preco\":257.4,\"quantidade\":15,\"data\":\"2018-10-31T00:00:00.000+0000\",\"volume\":3860.9999999999995},{\"preco\":350.53,\"quantidade\":20,\"data\":\"2018-10-31T00:00:00.000+0000\",\"volume\":7010.599999999999},{\"preco\":415.46,\"quantidade\":24,\"data\":\"2018-10-31T00:00:00.000+0000\",\"volume\":9971.039999999999},{\"preco\":422.11,\"quantidade\":24,\"data\":\"2018-10-31T00:00:00.000+0000\",\"volume\":10130.64},{\"preco\":358.27,\"quantidade\":21,\"data\":\"2018-11-01T00:00:00.000+0000\",\"volume\":7523.67},{\"preco\":241.39,\"quantidade\":14,\"data\":\"2018-11-01T00:00:00.000+0000\",\"volume\":3379.46},{\"preco\":421.2,\"quantidade\":24,\"data\":\"2018-11-01T00:00:00.000+0000\",\"volume\":10108.8},{\"preco\":371.84,\"quantidade\":21,\"data\":\"2018-11-01T00:00:00.000+0000\",\"volume\":7808.639999999999},{\"preco\":326.46,\"quantidade\":19,\"data\":\"2018-11-02T00:00:00.000+0000\",\"volume\":6202.74},{\"preco\":297.43,\"quantidade\":17,\"data\":\"2018-11-02T00:00:00.000+0000\",\"volume\":5056.31},{\"preco\":396.93,\"quantidade\":23,\"data\":\"2018-11-02T00:00:00.000+0000\",\"volume\":9129.39},{\"preco\":334.41,\"quantidade\":19,\"data\":\"2018-11-02T00:00:00.000+0000\",\"volume\":6353.790000000001},{\"preco\":262.16,\"quantidade\":15,\"data\":\"2018-11-03T00:00:00.000+0000\",\"volume\":3932.4000000000005},{\"preco\":221.63,\"quantidade\":13,\"data\":\"2018-11-03T00:00:00.000+0000\",\"volume\":2881.19},{\"preco\":239.45,\"quantidade\":14,\"data\":\"2018-11-03T00:00:00.000+0000\",\"volume\":3352.2999999999997},{\"preco\":441.38,\"quantidade\":25,\"data\":\"2018-11-03T00:00:00.000+0000\",\"volume\":11034.5},{\"preco\":425.01,\"quantidade\":25,\"data\":\"2018-11-04T00:00:00.000+0000\",\"volume\":10625.25},{\"preco\":386.13,\"quantidade\":22,\"data\":\"2018-11-04T00:00:00.000+0000\",\"volume\":8494.86},{\"preco\":395.06,\"quantidade\":23,\"data\":\"2018-11-04T00:00:00.000+0000\",\"volume\":9086.38},{\"preco\":406.86,\"quantidade\":23,\"data\":\"2018-11-04T00:00:00.000+0000\",\"volume\":9357.78},{\"preco\":434.09,\"quantidade\":25,\"data\":\"2018-11-05T00:00:00.000+0000\",\"volume\":10852.25},{\"preco\":267.59,\"quantidade\":15,\"data\":\"2018-11-05T00:00:00.000+0000\",\"volume\":4013.8499999999995},{\"preco\":230.82,\"quantidade\":13,\"data\":\"2018-11-05T00:00:00.000+0000\",\"volume\":3000.66},{\"preco\":440.45,\"quantidade\":25,\"data\":\"2018-11-05T00:00:00.000+0000\",\"volume\":11011.25},{\"preco\":232.11,\"quantidade\":13,\"data\":\"2018-11-06T00:00:00.000+0000\",\"volume\":3017.4300000000003},{\"preco\":240.93,\"quantidade\":14,\"data\":\"2018-11-06T00:00:00.000+0000\",\"volume\":3373.02},{\"preco\":307.96,\"quantidade\":18,\"data\":\"2018-11-06T00:00:00.000+0000\",\"volume\":5543.28},{\"preco\":326.67,\"quantidade\":19,\"data\":\"2018-11-06T00:00:00.000+0000\",\"volume\":6206.7300000000005},{\"preco\":438.15,\"quantidade\":25,\"data\":\"2018-11-07T00:00:00.000+0000\",\"volume\":10953.75},{\"preco\":226.87,\"quantidade\":13,\"data\":\"2018-11-07T00:00:00.000+0000\",\"volume\":2949.31},{\"preco\":348.29,\"quantidade\":20,\"data\":\"2018-11-07T00:00:00.000+0000\",\"volume\":6965.8},{\"preco\":405.84,\"quantidade\":23,\"data\":\"2018-11-07T00:00:00.000+0000\",\"volume\":9334.32},{\"preco\":357.0,\"quantidade\":21,\"data\":\"2018-11-08T00:00:00.000+0000\",\"volume\":7497.0},{\"preco\":425.17,\"quantidade\":25,\"data\":\"2018-11-08T00:00:00.000+0000\",\"volume\":10629.25},{\"preco\":364.21,\"quantidade\":21,\"data\":\"2018-11-08T00:00:00.000+0000\",\"volume\":7648.41},{\"preco\":379.21,\"quantidade\":22,\"data\":\"2018-11-08T00:00:00.000+0000\",\"volume\":8342.619999999999},{\"preco\":435.07,\"quantidade\":25,\"data\":\"2018-11-09T00:00:00.000+0000\",\"volume\":10876.75},{\"preco\":240.03,\"quantidade\":14,\"data\":\"2018-11-09T00:00:00.000+0000\",\"volume\":3360.42},{\"preco\":370.52,\"quantidade\":21,\"data\":\"2018-11-09T00:00:00.000+0000\",\"volume\":7780.92},{\"preco\":397.45,\"quantidade\":23,\"data\":\"2018-11-09T00:00:00.000+0000\",\"volume\":9141.35},{\"preco\":369.31,\"quantidade\":21,\"data\":\"2018-11-10T00:00:00.000+0000\",\"volume\":7755.51},{\"preco\":438.55,\"quantidade\":25,\"data\":\"2018-11-10T00:00:00.000+0000\",\"volume\":10963.75},{\"preco\":423.84,\"quantidade\":24,\"data\":\"2018-11-10T00:00:00.000+0000\",\"volume\":10172.16},{\"preco\":250.4,\"quantidade\":14,\"data\":\"2018-11-10T00:00:00.000+0000\",\"volume\":3505.6},{\"preco\":308.92,\"quantidade\":18,\"data\":\"2018-11-11T00:00:00.000+0000\",\"volume\":5560.56},{\"preco\":358.56,\"quantidade\":21,\"data\":\"2018-11-11T00:00:00.000+0000\",\"volume\":7529.76},{\"preco\":270.65,\"quantidade\":15,\"data\":\"2018-11-11T00:00:00.000+0000\",\"volume\":4059.7499999999995},{\"preco\":265.47,\"quantidade\":15,\"data\":\"2018-11-11T00:00:00.000+0000\",\"volume\":3982.05},{\"preco\":394.91,\"quantidade\":23,\"data\":\"2018-11-12T00:00:00.000+0000\",\"volume\":9082.93},{\"preco\":402.01,\"quantidade\":23,\"data\":\"2018-11-12T00:00:00.000+0000\",\"volume\":9246.23},{\"preco\":338.18,\"quantidade\":19,\"data\":\"2018-11-12T00:00:00.000+0000\",\"volume\":6425.42},{\"preco\":303.48,\"quantidade\":17,\"data\":\"2018-11-12T00:00:00.000+0000\",\"volume\":5159.16},{\"preco\":229.81,\"quantidade\":13,\"data\":\"2018-11-13T00:00:00.000+0000\",\"volume\":2987.53},{\"preco\":338.8,\"quantidade\":19,\"data\":\"2018-11-13T00:00:00.000+0000\",\"volume\":6437.2},{\"preco\":309.9,\"quantidade\":18,\"data\":\"2018-11-13T00:00:00.000+0000\",\"volume\":5578.2},{\"preco\":335.01,\"quantidade\":19,\"data\":\"2018-11-13T00:00:00.000+0000\",\"volume\":6365.19},{\"preco\":226.03,\"quantidade\":13,\"data\":\"2018-11-14T00:00:00.000+0000\",\"volume\":2938.39},{\"preco\":440.14,\"quantidade\":25,\"data\":\"2018-11-14T00:00:00.000+0000\",\"volume\":11003.5},{\"preco\":404.6,\"quantidade\":23,\"data\":\"2018-11-14T00:00:00.000+0000\",\"volume\":9305.800000000001},{\"preco\":255.73,\"quantidade\":15,\"data\":\"2018-11-14T00:00:00.000+0000\",\"volume\":3835.95},{\"preco\":382.72,\"quantidade\":22,\"data\":\"2018-11-15T00:00:00.000+0000\",\"volume\":8419.84},{\"preco\":364.35,\"quantidade\":21,\"data\":\"2018-11-15T00:00:00.000+0000\",\"volume\":7651.35},{\"preco\":230.13,\"quantidade\":13,\"data\":\"2018-11-15T00:00:00.000+0000\",\"volume\":2991.69},{\"preco\":362.7,\"quantidade\":21,\"data\":\"2018-11-15T00:00:00.000+0000\",\"volume\":7616.7},{\"preco\":276.49,\"quantidade\":16,\"data\":\"2018-11-16T00:00:00.000+0000\",\"volume\":4423.84},{\"preco\":387.25,\"quantidade\":22,\"data\":\"2018-11-16T00:00:00.000+0000\",\"volume\":8519.5},{\"preco\":440.47,\"quantidade\":25,\"data\":\"2018-11-16T00:00:00.000+0000\",\"volume\":11011.75},{\"preco\":285.62,\"quantidade\":16,\"data\":\"2018-11-16T00:00:00.000+0000\",\"volume\":4569.92},{\"preco\":433.18,\"quantidade\":25,\"data\":\"2018-11-17T00:00:00.000+0000\",\"volume\":10829.5},{\"preco\":294.46,\"quantidade\":17,\"data\":\"2018-11-17T00:00:00.000+0000\",\"volume\":5005.82},{\"preco\":283.0,\"quantidade\":16,\"data\":\"2018-11-17T00:00:00.000+0000\",\"volume\":4528.0},{\"preco\":375.59,\"quantidade\":22,\"data\":\"2018-11-17T00:00:00.000+0000\",\"volume\":8262.98},{\"preco\":223.05,\"quantidade\":13,\"data\":\"2018-11-18T00:00:00.000+0000\",\"volume\":2899.65},{\"preco\":325.53,\"quantidade\":19,\"data\":\"2018-11-18T00:00:00.000+0000\",\"volume\":6185.07},{\"preco\":251.06,\"quantidade\":14,\"data\":\"2018-11-18T00:00:00.000+0000\",\"volume\":3514.84},{\"preco\":247.69,\"quantidade\":14,\"data\":\"2018-11-18T00:00:00.000+0000\",\"volume\":3467.66},{\"preco\":402.72,\"quantidade\":23,\"data\":\"2018-11-19T00:00:00.000+0000\",\"volume\":9262.560000000001},{\"preco\":357.2,\"quantidade\":21,\"data\":\"2018-11-19T00:00:00.000+0000\",\"volume\":7501.2},{\"preco\":423.96,\"quantidade\":24,\"data\":\"2018-11-19T00:00:00.000+0000\",\"volume\":10175.039999999999},{\"preco\":291.08,\"quantidade\":17,\"data\":\"2018-11-19T00:00:00.000+0000\",\"volume\":4948.36},{\"preco\":439.36,\"quantidade\":25,\"data\":\"2018-11-20T00:00:00.000+0000\",\"volume\":10984.0},{\"preco\":338.91,\"quantidade\":19,\"data\":\"2018-11-20T00:00:00.000+0000\",\"volume\":6439.290000000001},{\"preco\":293.69,\"quantidade\":17,\"data\":\"2018-11-20T00:00:00.000+0000\",\"volume\":4992.73},{\"preco\":356.88,\"quantidade\":20,\"data\":\"2018-11-20T00:00:00.000+0000\",\"volume\":7137.6},{\"preco\":232.18,\"quantidade\":13,\"data\":\"2018-11-21T00:00:00.000+0000\",\"volume\":3018.34},{\"preco\":304.3,\"quantidade\":17,\"data\":\"2018-11-21T00:00:00.000+0000\",\"volume\":5173.1},{\"preco\":221.83,\"quantidade\":13,\"data\":\"2018-11-21T00:00:00.000+0000\",\"volume\":2883.79},{\"preco\":320.97,\"quantidade\":18,\"data\":\"2018-11-21T00:00:00.000+0000\",\"volume\":5777.460000000001},{\"preco\":307.02,\"quantidade\":18,\"data\":\"2018-11-22T00:00:00.000+0000\",\"volume\":5526.36},{\"preco\":293.99,\"quantidade\":17,\"data\":\"2018-11-22T00:00:00.000+0000\",\"volume\":4997.83},{\"preco\":407.76,\"quantidade\":23,\"data\":\"2018-11-22T00:00:00.000+0000\",\"volume\":9378.48},{\"preco\":330.42,\"quantidade\":19,\"data\":\"2018-11-22T00:00:00.000+0000\",\"volume\":6277.9800000000005},{\"preco\":310.67,\"quantidade\":18,\"data\":\"2018-11-23T00:00:00.000+0000\",\"volume\":5592.06},{\"preco\":296.72,\"quantidade\":17,\"data\":\"2018-11-23T00:00:00.000+0000\",\"volume\":5044.240000000001},{\"preco\":376.68,\"quantidade\":22,\"data\":\"2018-11-23T00:00:00.000+0000\",\"volume\":8286.960000000001},{\"preco\":309.01,\"quantidade\":18,\"data\":\"2018-11-23T00:00:00.000+0000\",\"volume\":5562.18},{\"preco\":414.67,\"quantidade\":24,\"data\":\"2018-11-24T00:00:00.000+0000\",\"volume\":9952.08},{\"preco\":336.31,\"quantidade\":19,\"data\":\"2018-11-24T00:00:00.000+0000\",\"volume\":6389.89},{\"preco\":237.05,\"quantidade\":13,\"data\":\"2018-11-24T00:00:00.000+0000\",\"volume\":3081.65},{\"preco\":387.36,\"quantidade\":22,\"data\":\"2018-11-24T00:00:00.000+0000\",\"volume\":8521.92},{\"preco\":350.37,\"quantidade\":20,\"data\":\"2018-11-25T00:00:00.000+0000\",\"volume\":7007.4},{\"preco\":243.52,\"quantidade\":14,\"data\":\"2018-11-25T00:00:00.000+0000\",\"volume\":3409.28},{\"preco\":300.57,\"quantidade\":17,\"data\":\"2018-11-25T00:00:00.000+0000\",\"volume\":5109.69},{\"preco\":256.33,\"quantidade\":15,\"data\":\"2018-11-25T00:00:00.000+0000\",\"volume\":3844.95},{\"preco\":363.54,\"quantidade\":21,\"data\":\"2018-11-26T00:00:00.000+0000\",\"volume\":7634.34},{\"preco\":270.61,\"quantidade\":15,\"data\":\"2018-11-26T00:00:00.000+0000\",\"volume\":4059.15},{\"preco\":310.32,\"quantidade\":18,\"data\":\"2018-11-26T00:00:00.000+0000\",\"volume\":5585.76},{\"preco\":375.1,\"quantidade\":22,\"data\":\"2018-11-26T00:00:00.000+0000\",\"volume\":8252.2},{\"preco\":400.83,\"quantidade\":23,\"data\":\"2018-11-27T00:00:00.000+0000\",\"volume\":9219.09},{\"preco\":411.63,\"quantidade\":24,\"data\":\"2018-11-27T00:00:00.000+0000\",\"volume\":9879.119999999999},{\"preco\":336.44,\"quantidade\":19,\"data\":\"2018-11-27T00:00:00.000+0000\",\"volume\":6392.36},{\"preco\":286.22,\"quantidade\":16,\"data\":\"2018-11-27T00:00:00.000+0000\",\"volume\":4579.52},{\"preco\":284.42,\"quantidade\":16,\"data\":\"2018-11-28T00:00:00.000+0000\",\"volume\":4550.72},{\"preco\":250.86,\"quantidade\":14,\"data\":\"2018-11-28T00:00:00.000+0000\",\"volume\":3512.04},{\"preco\":366.57,\"quantidade\":21,\"data\":\"2018-11-28T00:00:00.000+0000\",\"volume\":7697.97},{\"preco\":427.65,\"quantidade\":25,\"data\":\"2018-11-28T00:00:00.000+0000\",\"volume\":10691.25},{\"preco\":294.55,\"quantidade\":17,\"data\":\"2018-11-29T00:00:00.000+0000\",\"volume\":5007.35},{\"preco\":412.2,\"quantidade\":24,\"data\":\"2018-11-29T00:00:00.000+0000\",\"volume\":9892.8},{\"preco\":433.47,\"quantidade\":25,\"data\":\"2018-11-29T00:00:00.000+0000\",\"volume\":10836.75},{\"preco\":353.27,\"quantidade\":20,\"data\":\"2018-11-29T00:00:00.000+0000\",\"volume\":7065.4},{\"preco\":240.38,\"quantidade\":14,\"data\":\"2018-11-30T00:00:00.000+0000\",\"volume\":3365.3199999999997},{\"preco\":392.92,\"quantidade\":23,\"data\":\"2018-11-30T00:00:00.000+0000\",\"volume\":9037.16},{\"preco\":286.24,\"quantidade\":16,\"data\":\"2018-11-30T00:00:00.000+0000\",\"volume\":4579.84},{\"preco\":426.76,\"quantidade\":25,\"data\":\"2018-11-30T00:00:00.000+0000\",\"volume\":10669.0},{\"preco\":357.42,\"quantidade\":21,\"data\":\"2018-12-01T00:00:00.000+0000\",\"volume\":7505.820000000001},{\"preco\":433.64,\"quantidade\":25,\"data\":\"2018-12-01T00:00:00.000+0000\",\"volume\":10841.0},{\"preco\":390.88,\"quantidade\":22,\"data\":\"2018-12-01T00:00:00.000+0000\",\"volume\":8599.36},{\"preco\":388.09,\"quantidade\":22,\"data\":\"2018-12-01T00:00:00.000+0000\",\"volume\":8537.98},{\"preco\":394.07,\"quantidade\":23,\"data\":\"2018-12-02T00:00:00.000+0000\",\"volume\":9063.61},{\"preco\":415.36,\"quantidade\":24,\"data\":\"2018-12-02T00:00:00.000+0000\",\"volume\":9968.64},{\"preco\":260.6,\"quantidade\":15,\"data\":\"2018-12-02T00:00:00.000+0000\",\"volume\":3909.0000000000005},{\"preco\":436.9,\"quantidade\":25,\"data\":\"2018-12-02T00:00:00.000+0000\",\"volume\":10922.5},{\"preco\":261.31,\"quantidade\":15,\"data\":\"2018-12-03T00:00:00.000+0000\",\"volume\":3919.65},{\"preco\":396.89,\"quantidade\":23,\"data\":\"2018-12-03T00:00:00.000+0000\",\"volume\":9128.47},{\"preco\":430.13,\"quantidade\":25,\"data\":\"2018-12-03T00:00:00.000+0000\",\"volume\":10753.25},{\"preco\":440.64,\"quantidade\":25,\"data\":\"2018-12-03T00:00:00.000+0000\",\"volume\":11016.0},{\"preco\":389.39,\"quantidade\":22,\"data\":\"2018-12-04T00:00:00.000+0000\",\"volume\":8566.58},{\"preco\":411.73,\"quantidade\":24,\"data\":\"2018-12-04T00:00:00.000+0000\",\"volume\":9881.52},{\"preco\":337.23,\"quantidade\":19,\"data\":\"2018-12-04T00:00:00.000+0000\",\"volume\":6407.370000000001},{\"preco\":291.09,\"quantidade\":17,\"data\":\"2018-12-04T00:00:00.000+0000\",\"volume\":4948.53},{\"preco\":256.63,\"quantidade\":15,\"data\":\"2018-12-05T00:00:00.000+0000\",\"volume\":3849.45},{\"preco\":410.26,\"quantidade\":24,\"data\":\"2018-12-05T00:00:00.000+0000\",\"volume\":9846.24},{\"preco\":268.76,\"quantidade\":15,\"data\":\"2018-12-05T00:00:00.000+0000\",\"volume\":4031.3999999999996},{\"preco\":294.83,\"quantidade\":17,\"data\":\"2018-12-05T00:00:00.000+0000\",\"volume\":5012.11},{\"preco\":315.01,\"quantidade\":18,\"data\":\"2018-12-06T00:00:00.000+0000\",\"volume\":5670.18},{\"preco\":237.92,\"quantidade\":13,\"data\":\"2018-12-06T00:00:00.000+0000\",\"volume\":3092.96},{\"preco\":264.86,\"quantidade\":15,\"data\":\"2018-12-06T00:00:00.000+0000\",\"volume\":3972.9},{\"preco\":274.13,\"quantidade\":16,\"data\":\"2018-12-06T00:00:00.000+0000\",\"volume\":4386.08}],\"quantidade\":244}");
	}

	@Test
	public void deveRetornarNegociacaoEspecifica() throws Exception {
		assertThat(this.restTemplate.getForObject("http://localhost:" + port + "/negociacoes/1", String.class))
				.isEqualTo("{\"negociacoes\":[{\"preco\":265.3,\"quantidade\":15,\"data\":\"2018-10-07T00:00:00.000+0000\",\"volume\":3979.5}],\"quantidade\":1}");
	}
	
	@Test
	public void deveRetornarWhitelabelCasoPaginaNaoExista() throws Exception {
		assertThat(this.restTemplate.getForObject("http://localhost:" + port + "/negociacoess", String.class))
		.contains("No message available");
	}
	
	@Test
	public void deveRetornarNegociacoesEspecificasDeDeterminadaData() throws Exception {
		assertThat(this.restTemplate.getForObject("http://localhost:" + port + "/negociacoes?de=2018/10/04&ate=2018/10/13", String.class))
		.isEqualTo("{\"negociacoes\":[{\"preco\":265.3,\"quantidade\":15,\"data\":\"2018-10-07T00:00:00.000+0000\",\"volume\":3979.5},{\"preco\":348.41,\"quantidade\":20,\"data\":\"2018-10-07T00:00:00.000+0000\",\"volume\":6968.200000000001},{\"preco\":332.09,\"quantidade\":19,\"data\":\"2018-10-07T00:00:00.000+0000\",\"volume\":6309.709999999999},{\"preco\":299.62,\"quantidade\":17,\"data\":\"2018-10-07T00:00:00.000+0000\",\"volume\":5093.54},{\"preco\":338.2,\"quantidade\":19,\"data\":\"2018-10-08T00:00:00.000+0000\",\"volume\":6425.8},{\"preco\":285.2,\"quantidade\":16,\"data\":\"2018-10-08T00:00:00.000+0000\",\"volume\":4563.2},{\"preco\":303.81,\"quantidade\":17,\"data\":\"2018-10-08T00:00:00.000+0000\",\"volume\":5164.77},{\"preco\":331.15,\"quantidade\":19,\"data\":\"2018-10-08T00:00:00.000+0000\",\"volume\":6291.849999999999},{\"preco\":374.02,\"quantidade\":22,\"data\":\"2018-10-09T00:00:00.000+0000\",\"volume\":8228.439999999999},{\"preco\":399.78,\"quantidade\":23,\"data\":\"2018-10-09T00:00:00.000+0000\",\"volume\":9194.939999999999},{\"preco\":272.44,\"quantidade\":16,\"data\":\"2018-10-09T00:00:00.000+0000\",\"volume\":4359.04},{\"preco\":357.56,\"quantidade\":21,\"data\":\"2018-10-09T00:00:00.000+0000\",\"volume\":7508.76},{\"preco\":248.09,\"quantidade\":14,\"data\":\"2018-10-10T00:00:00.000+0000\",\"volume\":3473.26},{\"preco\":418.64,\"quantidade\":24,\"data\":\"2018-10-10T00:00:00.000+0000\",\"volume\":10047.36},{\"preco\":261.74,\"quantidade\":15,\"data\":\"2018-10-10T00:00:00.000+0000\",\"volume\":3926.1000000000004},{\"preco\":375.8,\"quantidade\":22,\"data\":\"2018-10-10T00:00:00.000+0000\",\"volume\":8267.6},{\"preco\":327.38,\"quantidade\":19,\"data\":\"2018-10-11T00:00:00.000+0000\",\"volume\":6220.22},{\"preco\":312.65,\"quantidade\":18,\"data\":\"2018-10-11T00:00:00.000+0000\",\"volume\":5627.7},{\"preco\":314.5,\"quantidade\":18,\"data\":\"2018-10-11T00:00:00.000+0000\",\"volume\":5661.0},{\"preco\":278.44,\"quantidade\":16,\"data\":\"2018-10-11T00:00:00.000+0000\",\"volume\":4455.04},{\"preco\":237.99,\"quantidade\":13,\"data\":\"2018-10-12T00:00:00.000+0000\",\"volume\":3093.87},{\"preco\":265.46,\"quantidade\":15,\"data\":\"2018-10-12T00:00:00.000+0000\",\"volume\":3981.8999999999996},{\"preco\":351.45,\"quantidade\":20,\"data\":\"2018-10-12T00:00:00.000+0000\",\"volume\":7029.0},{\"preco\":334.97,\"quantidade\":19,\"data\":\"2018-10-12T00:00:00.000+0000\",\"volume\":6364.43},{\"preco\":314.44,\"quantidade\":18,\"data\":\"2018-10-13T00:00:00.000+0000\",\"volume\":5659.92},{\"preco\":288.94,\"quantidade\":16,\"data\":\"2018-10-13T00:00:00.000+0000\",\"volume\":4623.04},{\"preco\":227.97,\"quantidade\":13,\"data\":\"2018-10-13T00:00:00.000+0000\",\"volume\":2963.61},{\"preco\":243.83,\"quantidade\":14,\"data\":\"2018-10-13T00:00:00.000+0000\",\"volume\":3413.6200000000003}],\"quantidade\":28}");
	}
}
